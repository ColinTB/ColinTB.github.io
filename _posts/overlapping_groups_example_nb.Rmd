---
layout: post
title: "Overlaping groups with dplyr"
date: 2017-08-07
categories: rblogging
tags: dplyr group_by summarize_at
output: 
  md_document:
    variant: markdown_github
---

This notebook shows some simple code to create and work with overlapping groups in a tidyverse framework.

This is based on a questions I originally asked [here](https://stackoverflow.com/questions/42933058/summarizing-with-overlapping-groups-using-dplyr).


----

## 1. Example data

Lets use the famous iris data set as an example. This is data on flowers and their measurements.
```{r, echo=TRUE}

glimpse(iris)

```

## 2. Simple Summary

It is easy to summarize across Species. For example the average sepal and petal length by species.
```{r, echo=TRUE}

iris %>% 
  group_by(Species) %>% 
  summarize_at(vars(Sepal.Length, Petal.Length), mean)

```

## 2. Overlapping group summaries

Now lets suppose we want to summarize with overlapping groups. We now want summary figures across all groups, and just Setosa and Versicolor. 

```{r, echo=TRUE}

iris %>% 
  mutate(`All Species` = T,
         `Setosa & Versicolour` = Species %in% c("setosa", "versicolor")) %>% 
  gather(group, keep, `All Species`, `Setosa & Versicolour`) %>% 
  filter(keep) %>% 
  group_by(group) %>% 
  summarize_at(vars(Sepal.Length, Petal.Length), mean)


```


And that's it. Done!
